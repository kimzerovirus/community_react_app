<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Next.js로 만드는 깃블로그 | kimzerovirus.log</title><meta name="keywords" content="java, javascript, typescript, kotlin, spring, spring-boot, react, 개발, 개발블로그, blog, kimzerovirus"/><meta name="description" content="


티스토리 블로그를 이용하던 중 문득 생각이 들었다. 만약 데이터센터에 문제가 생겨 프로그래밍을 공부하며 블로그에 저장해둔 자료들을 찾을 수 없게 된다면 큰일이지 않을까란 생각이 말이다. 그렇게 내 로컬 컴퓨터에도 포스트를 저장해 두는 깃블로그를 만들기로 결정했다.

깃블로그를 만드..."/><meta name="application-name" content="Kimzerovirus.log"/><meta name="msapplication-tooltip" content="Kimzerovirus.log"/><meta property="og:type" content="website"/><meta property="og:title" content="Next.js로 만드는 깃블로그 | kimzerovirus.log"/><meta property="og:description" content="


티스토리 블로그를 이용하던 중 문득 생각이 들었다. 만약 데이터센터에 문제가 생겨 프로그래밍을 공부하며 블로그에 저장해둔 자료들을 찾을 수 없게 된다면 큰일이지 않을까란 생각이 말이다. 그렇게 내 로컬 컴퓨터에도 포스트를 저장해 두는 깃블로그를 만들기로 결정했다.

깃블로그를 만드..."/><meta property="og:image" content="https://avatars.githubusercontent.com/u/68390715?s=400&amp;u=325fb149f87913954651f3a8181577475af3b035&amp;v=4"/><meta property="og:url" content="https://kimzerovirus.github.io/post/project/2022/10/20/Next.js로 만드는 깃블로그 copy 5"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Next.js로 만드는 깃블로그 | kimzerovirus.log"/><meta name="twitter:description" content="


티스토리 블로그를 이용하던 중 문득 생각이 들었다. 만약 데이터센터에 문제가 생겨 프로그래밍을 공부하며 블로그에 저장해둔 자료들을 찾을 수 없게 된다면 큰일이지 않을까란 생각이 말이다. 그렇게 내 로컬 컴퓨터에도 포스트를 저장해 두는 깃블로그를 만들기로 결정했다.

깃블로그를 만드..."/><meta name="twitter:image" content="https://avatars.githubusercontent.com/u/68390715?s=400&amp;u=325fb149f87913954651f3a8181577475af3b035&amp;v=4"/><meta name="twitter:domain" content="Kimzerovirus.log"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/8f062713c50a2dc2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8f062713c50a2dc2.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-aa58d05bb7e72090.js" defer=""></script><script src="/_next/static/chunks/framework-0ba0ddd33199226d.js" defer=""></script><script src="/_next/static/chunks/main-e59df5067b749ff4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f6f46ee6678b76fc.js" defer=""></script><script src="/_next/static/chunks/690-0dad25105b285a03.js" defer=""></script><script src="/_next/static/chunks/664-06a970764c6b8a50.js" defer=""></script><script src="/_next/static/chunks/81-5adf0334d6d5ae05.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bsub%5D/%5Byear%5D/%5Bmonth%5D/%5Bday%5D/%5Bfilename%5D-61a1a642972ee9ae.js" defer=""></script><script src="/_next/static/swCgGB6KYo3eNNRWbOJxG/_buildManifest.js" defer=""></script><script src="/_next/static/swCgGB6KYo3eNNRWbOJxG/_ssgManifest.js" defer=""></script><script src="/_next/static/swCgGB6KYo3eNNRWbOJxG/_middlewareManifest.js" defer=""></script></head><body><div id="__next"></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"htmlstring":"\n\n\n티스토리 블로그를 이용하던 중 문득 생각이 들었다. 만약 데이터센터에 문제가 생겨 프로그래밍을 공부하며 블로그에 저장해둔 자료들을 찾을 수 없게 된다면 큰일이지 않을까란 생각이 말이다. 그렇게 내 로컬 컴퓨터에도 포스트를 저장해 두는 깃블로그를 만들기로 결정했다.\n\n깃블로그를 만드는 방법은 생각보다 간단하다. jekyll이라는 템플릿이 있으므로 이 템플릿을 이용하면 족히 10분이면 블로그를 완성할 수 있을 것이다. 하지만 비록 내가 백엔드 개발자로 일하고 있을지라도, 본래는 디자인과를 다니며 퍼블리싱을 배웠고 또 회사업무로 spa를 다룬 경험도 있으므로 오랜만에 리액트를 다시 공부할겸 직접 만들기로 결정하였다.\n\n## SPA를 활용하여 깃블로그를 만드는 방법\n\n앞서 설명한것처럼 jekyll이라는 테마를 이용하면 쉽게 만들 수 있지만 커스텀을 할 경우 html 파일을 수정해야 되므로 컴포넌트 방식으로 개발하기에는 무리가 있다. 따라서 리액트나 vue.js를 활용하여 개발한다면 .nojekyll이라는 파일을 루트에 생성하고 spa로 직접 마크다운 파일을 읽어들이는 시스템을 더해서 컴포넌트 개발하면 된다. 다만, 각 포털에 검색되게 만들기 위해서는 csr 방식이 아닌 ssr 방식으로 개발되어야 하므로 gatsby, Next.js 등이 필요하게 된다. \n\n## 마크다운 파일을 읽어 들이는 방법\n\n마크다운 블로그에서의 기본적인 흐름은 다음과 같다. fs모듈을 이용하여 디렉토리에 있는 파일을 읽어들이고 읽어들인 데이터들을 리액트 엘리먼트들로 변환하여 컴포넌트안에 삽입해주면 된다. 그리고 css를 더하여 마음에 드는 디자인을 만들어 주면 끝이다.\n\n### 유용한 모듈들\n\n- `gray-matter` : yaml 형식으로 작성된 frontmatter를 읽어 들이는 모듈이다.\n- `react-markdown` : 리액트에서 `innerHTML`을 사용할 경우 `dangerouslysetinnerhtml` 을 사용해야 되는데 이러한 작업을 편하게 해주는 모듈이다. npm에는 마크다운을 리액트엘리먼트로 쉽게 변환해주는 모듈이라고 기술되어 있다.\n- `react-syntax-highlighter` : 마크다운에 작성된 코드 태그의 스타일링을 더해주는 모듈이다.\n\n## SEO 적용하기\n\n처음에 `next-seo`라는 모듈을 사용하여 만들었는데 특정 조건에서 원하는대로 seo적용이 안되는 경우가 있어 직접 meta태그 컴포넌트를 만들어서 적용을 했는데, 이 때 한가지 주의해야할 점이 있다.\n\nNext.js에서 컴포넌트단에서 설정한 `\u003cHead/\u003e`태그들은 자바스크립트를 이용하여 페이지가 랜더링 된 이후 값을 변경한 것들이다. 그런데 이게 왜 문제가 되냐면 카카오와 같은 포털에서는 서버단에서 처음에 만들어진 데이터를 바탕으로 수집하므로 SEO를 페이지마다 잘 설정하였다고 해도 카카오 측에서는 그 데이터를 읽어들일 수가 없는 것이다. \n\n이를 해결하기 위해서는 서버측에서 SEO를 먼저 만들어 줘야 한다는 것인데 Next.js에서 서버는 `_app.tsx`이다. 이곳에서 설정해야 된다는 것인데 각 페이지 별로 동적으로 설정하기 위해 나는 다음과 같은 방법을 취했다. 각 페이지의 데이터는 `getStaticProps`함수를 통해 만들어지는데 이 props들은 전부 `_app.tsx`의 `MyApp`함수의 2번째 인자로 전달 된다. 따라서 이렇게 전달된 데이터를 활용하여 SEO를 서버측에서 각페이지에 맞게 만들면 된다.\n\n\n\n*Tip.* 배포 후 카카오톡에 나의 블로그를 공유하였을 때 어떻게 뜨는지 확인하려면 아래 사이트를 이용하면 편하게 확인할 수 있다.\n\nhttps://developers.kakao.com/tool/debugger/sharing\n\n*추가*\n\n`next-seo`를 사용하였을 때 카카오톡 공유시에 카카오톡에서만 원하는 데이터로 나오지 않는 이슈가 있어 모듈을 제거하고 직접 컴포넌트를 만들어서 적용했는데 지금 생각하보니 카카오톡은 og태그를 기반으로 데이터가 수집된다. 하지만 `next-seo`를 사용했을 때 이부분의 설정이 미흡하여 각 페이지 별 값이 적용되지 않고 default값만 적용된것 같다.\n\n## 후기\n\n여기서는 Next.js로 블로그를 만들었지만 솔직히 fs모듈을 이용해서 직접 데이터를 가져오는 Next.js에 비해 graphql을 통해 데이터를 가져올 수 있는 gatsby가 더 마크다운 블로그 프로젝트에 적합한것 같다. ~~사실 내가 Next.js로 블로그를 만든 이유는 Next.js만 어줍짢게 알고 있어서 무작정 진행하다가 절반 정도 만들고서 gatsby에 대해 알게 되었기 때문이다.~~\n\n따라서 추후에 블로그를 리뉴얼하게 된다면 gatsby로 마이그레이션 할 생각이다. 또한 현재는 webpack 번들러 기반이지만 이 webpack이 처음 나왔을 때는 정말 획기적인 아이였지만 지금은 너무 오래되어 deploy시간이 다른것들에 비하여 상당한 시간이 걸린다. 그래서 다음 리뉴얼은 gatsby가 webpack 번들러가 아닌 vite 등을 기반으로 바뀌었을 때 작업을 시작하게 될것 같다. (하지만 gatsby개발진은 당분간은 webpack에서 다른 번들러로 이주할 생각이 없다고 한다.)\n","data":{"title":"Next.js로 만드는 깃블로그","date":"2022-10-20","tags":["React","Next.js"]},"indexes":[{"title":"SPA를 활용하여 깃블로그를 만드는 방법","depth":12},{"title":"마크다운 파일을 읽어 들이는 방법","depth":12},{"title":"유용한 모듈들","depth":24},{"title":"SEO 적용하기","depth":12},{"title":"후기","depth":12}],"serieslist":[],"prevnext":[{"title":"코프링부트 Todo App 만들기","link":"/post/project/2022/09/27/코프링부트 Todo App 만들기"},{"title":"Next.js로 만드는 깃블로그","link":"/post/project/2022/10/20/Next.js로 만드는 깃블로그 copy 2"},{"title":"Next.js로 만드는 깃블로그","link":"/post/project/2022/10/20/Next.js로 만드는 깃블로그"},{"title":"Next.js로 만드는 깃블로그","link":"/post/project/2022/10/20/Next.js로 만드는 깃블로그 copy 3"},{"title":"Next.js로 만드는 깃블로그","link":"/post/project/2022/10/20/Next.js로 만드는 깃블로그 copy 2"},{"title":"Next.js로 만드는 깃블로그","link":"/post/project/2022/10/20/Next.js로 만드는 깃블로그 copy 4"},{"title":"Next.js로 만드는 깃블로그","link":"/post/project/2022/10/20/Next.js로 만드는 깃블로그 copy 3"},{"title":"Next.js로 만드는 깃블로그","link":"/post/project/2022/10/20/Next.js로 만드는 깃블로그 copy 5"},{"title":"Next.js로 만드는 깃블로그","link":"/post/project/2022/10/20/Next.js로 만드는 깃블로그 copy 4"},{"title":"Next.js로 만드는 깃블로그","link":"/post/project/2022/10/20/Next.js로 만드는 깃블로그 copy"},{"title":"Next.js로 만드는 깃블로그","link":"/post/project/2022/10/20/Next.js로 만드는 깃블로그 copy 5"},null],"seo":{"title":"Next.js로 만드는 깃블로그 | kimzerovirus.log","description":"\n\n\n티스토리 블로그를 이용하던 중 문득 생각이 들었다. 만약 데이터센터에 문제가 생겨 프로그래밍을 공부하며 블로그에 저장해둔 자료들을 찾을 수 없게 된다면 큰일이지 않을까란 생각이 말이다. 그렇게 내 로컬 컴퓨터에도 포스트를 저장해 두는 깃블로그를 만들기로 결정했다.\n\n깃블로그를 만드...","url":"https://kimzerovirus.github.io/post/project/2022/10/20/Next.js로 만드는 깃블로그 copy 5"}},"__N_SSG":true},"page":"/post/[sub]/[year]/[month]/[day]/[filename]","query":{"sub":"project","year":"2022","month":"10","day":"20","filename":"Next.js로 만드는 깃블로그 copy 5"},"buildId":"swCgGB6KYo3eNNRWbOJxG","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>